<!DOCTYPE html>
<!-- saved from url=(0025)http://dp.sbs.ch/jobs/new -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
	<title>DAISY Pipeline 2</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Web interface for Pipeline 2">
	<meta name="author" content="DAISY Consortium">
	
	<meta http-equiv="cache-control" content="max-age=0">
	<meta http-equiv="cache-control" content="no-cache">
	<meta http-equiv="expires" content="0">
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT">
	<meta http-equiv="pragma" content="no-cache">
	
	<!-- Styles -->
	<link href="../_resources/jquery-ui-1.10.0.custom.css" rel="stylesheet" type="text/css">
	<link href="../theme/stylesheets/bootstrap.min.css" rel="stylesheet" type="text/css">
	
		<link href="../_resources/bootstrap-responsive.css" rel="stylesheet" type="text/css">
	
	
		<link href="../_resources/jquery.fileupload-ui.css" rel="stylesheet" type="text/css">
	
	<link href="../_resources/main.min.css" rel="stylesheet" type="text/css">
	
		<link href="../_resources/main.css" rel="stylesheet" type="text/css">
	
	
	<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	  <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
	  <script type="text/javascript">
	    // Date.now for old browsers
		if (typeof Date.now === 'undefined') { Date.now = function() { return 0+(new Date()); }; }
      </script>
	<![endif]-->

	<!-- Icons -->
	<link rel="shortcut icon" type="image/png" href="http://dp.sbs.ch/assets/images/favicon.png">
	<!--<link rel="apple-touch-icon" href="routes.Assets.at("images/apple-touch-icon.png")"/>
	<link rel="apple-touch-icon" sizes="72x72" href="routes.Assets.at("images/apple-touch-icon-72x72.png")"/>
	<link rel="apple-touch-icon" sizes="114x114" href="routes.Assets.at("images/apple-touch-icon-114x114.png")"/>-->
	
	<!-- Load jQuery before the content (so other templates may use jQuery) -->
	<script type="text/javascript" src="../_resources/jquery-1.9.1.min.js"></script>
	
		<!--[if lt IE 9]>
		  <script type="text/javascript" src="/assets/javascripts/jquery-migrate-1.1.1.min.js"></script>
		<![endif]-->
	
	
	<script type="text/javascript">
	
		$(function(){
			var ws = "ws://localhost:8080/notifications/8645723902876252/websocket";
			var http = "/notifications/8645723902876252/xhr";
			ws = ws.replace(/[^/]+:\/\/[^/]+/,"");
			ws = "ws://"+window.location.host+ws;
			http = window.location.protocol+"//"+window.location.host+http;
			Notifications.init(ws, http);
		});
	
	
	</script>
  </head>
	
  <body class="body" data-spy="scroll" data-target=".subnav" data-offset="50">
  	
	<div class="navbar navbar-inverse navbar-fixed-top"><a class="sbs-logo" title="SBS" href="http://www.sbs.ch/" '="">SBS</a>
	   	<div class="navbar-inner">
	   		<div class="container">
	   			<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
	                <span class="icon-bar"></span>
	                <span class="icon-bar"></span>
	                <span class="icon-bar"></span>
	            </a>
                
	   				<a class="brand" href="new.html">DAISY Pipeline 2</a>
	   			
	   			<nav class="nav-collapse">
		   			<ul class="nav">
		   				
		   					
			   					<li class="active"><a href="new.html"><i class="icon-plus icon-white"></i> Create Job</a></li>
			   				
		   				
		   				
			   				
			 					<li class=""><a href="../jobs.html"><i class="icon-tasks icon-white"></i> Jobs</a></li>
			 				
		 				
		 				
		 					<li class=""><a href="../about.html"><i class="icon-info-sign icon-white"></i> About</a></li>
	  					
		   			</ul>
		   			<ul class="nav pull-right">
		   				
		   					
		 						<li class=""><a href="../admin.html"><i class="icon-wrench icon-white"></i> 
		 							 Admin settings 
		 						</a></li>
		 					
		 				
		 				
	 						
		 						
			 						<li class=""><a href="../account.html"><i class="icon-user icon-white"></i> Administrator</a></li>
			 					
	 						
	 					
		 				
		 					<li class="">
		 						
	 								<a href="../logout.html"><i class="icon-remove icon-white"></i> Log out</a>
		 						
	  						</li>
	  					
	  					
	  				</ul>
				</nav>
			</div>
		</div>
	</div>
	
	<div class="container">
   	
		

<script type="text/javascript" charset="utf-8">

</script>

<style type="text/css">
h2 {
	text-align:center;
}
</style>

<hgroup>
<h1>Create Job</h1>
</hgroup>

<!-- script creation path -->
<div class="row" id="scriptCreationPathGroup">
	<div class="span8">
		<h2>Files</h2>
		<div id="filesInnerGroup">
			<div id="acceptsFiles">
    			


     

<form action="http://dp.sbs.ch/uploads" method="POST" enctype="multipart/form-data" id="fileupload" class="form-horizontal">
    
        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
        <div class="row">
            <div class="span6">
                <div class="fileupload-buttonbar" id="fileupload-buttonbar" style="width:200px;">
                    <!-- The fileinput-button span is used to style the file input field as button -->
                    <span class="btn btn-success fileinput-button" style="width:173px;">
                        <i class="icon-plus icon-white"></i>
                        <span id="upload-button-label">Upload Files</span>
                        <input type="file" name="files" multiple="" aria-labelledby="upload-button-label">
                    </span>
                    <a id="fileupload-help-link" class="accordion-toggle" data-toggle="collapse" href="http://dp.sbs.ch/jobs/new#fileupload-help" title="Help" style="position:absolute;"><i class="icon-question-sign">&nbsp;</i></a>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="span6">
                <div class="accordion-body collapse" id="fileupload-help">
                    <p>In modern browsers you can drag and drop files from your desktop into the browser window.</p>
                    <p>If you need to upload lots of files or if you need to preserve the folder structure of your fileset, please compress your files as a ZIP archive before uploading them. ZIP files will be unzipped on the server.</p>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="span6">
                <!-- The global progress information -->
                <div aria-live="polite" class="fileupload-progress fade">
                    <!-- The global progress bar -->
                    <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                        <div class="bar" style="width:0%;"></div>
                    </div>
                    <!-- The extended global progress information -->
                    <div class="progress-extended">&nbsp;</div>
                </div>
                
                <!-- The table listing the files available for upload/download -->
                <table aria-live="off" class="table table-striped">
                    <tbody class="files" id="files"></tbody>
                </table>
            </div>
        </div>
    
</form>



<script type="text/javascript">
    // <![CDATA[
    /* Instantiate file upload button. */
    $(function(){
        'use strict';
        
        var url = '/uploads?browserId=8645723902876252';
        url = window.location.protocol+"//"+window.location.host+url;
        
        // Initialize the jQuery File Upload widget:
        $('#fileupload').fileupload();
        
        // Settings:
        $('#fileupload').fileupload('option', {
            url: url
        });
        
        $('#fileupload')
        .bind('fileuploadadd', function (e, data) {
            // file queued
            var fileWidgetId = "file"+$("#files").find("tr.fileRow").size();
            data.formData = [{name:"element", value:fileWidgetId}];
            var tr = $('<tr class="fileRow" id="'+fileWidgetId+'"></tr>');
            fileWidgetId = "#"+fileWidgetId;
            tr.append('<td class="preview"><i class="'+mediaTypeIcon(data.files[0].type)+'"></i></td>');
            tr.append('<td class="name"></td>');
            tr.append('<td class="size"></td>');
            tr.append('<td><div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-valuetext="0%"><div class="bar" style="width:0%;"></div></div></td>');
            tr.append('<td class="cancel"><button class="btn btn-warning"><i class="icon-ban-circle icon-white"></i><span>Cancel</span></button><div class="error" style="display:none;"></div></td>');
            $("#files").append(tr);
            data.context = $(fileWidgetId);
            data.context.find("button").click(abortUpload);
            var xhr = data.submit()
                          .success(function (result, textStatus, jqXHR) {
                                          // Fix for old IEs not getting the filesize
                                        $("#files").find("tr").filter(function(){return $($(this).children()[1]).html()===result.files[0].name;}).each(function(){
                                            if (!(/^\d/).test($($(this).children()[2]).html())) {
                                                $($(this).children()[2]).html(Job.prettySize(result.files[0].size));
                                            }
                                        });
                                   });
            data.context.data('data',{data: data, jqXHR: xhr});
            var fileCount = Number($("#filesNicename").data("fileCount"));
            fileCount = (!isNaN(fileCount) ? fileCount : 0) + 1;
            $("#filesNicename").data("fileCount", fileCount);
            var plural = !isNaN(fileCount);
            $("#filesNicename").html($("#filesNicename").data("fileCount")+" "+(plural?"files":"file"));
            
            var size = 0;
            var filename = "";
            fileCount = 0;
            for (var i = 0; i < data.files.length; i++) {
                size += data.files[i].size;
                if (i === 0) filename = data.files[i].name;
                else if (i < 3) filename += ", "+data.files[i].name;
                fileCount++;
            }
            if (fileCount > 3) filename += " and "+(fileCount-3)+" more";
            if (isNaN(size))
                $(fileWidgetId+" td.size").html("unknown filesize");
            else
                $(fileWidgetId+" td.size").html(Job.prettySize(size));
            $(fileWidgetId+" td.name").html(filename);
        })
        .bind('fileuploadsubmit', function (e, data) {
            // file submitted
        })
        .bind('fileuploadsend', function (e, data) {
            // file started
        })
        .bind('fileuploadprogress', function (e, data) {
            // file progress update
            var fileWidgetId = "#"+data.context.attr("id");
            var loaded = typeof e.loaded === "undefined" ? 0 : e.loaded;
            var total = typeof e.total === "undefined" ? 0 : e.total;
            var progress = Math.abs(total) < 1 ? 0 : loaded/total*100;
            $(fileWidgetId+" div.progress").attr("aria-valuenow", progress);
            $(fileWidgetId+" div.progress").attr("aria-valuetext", Math.floor(progress)+"%");
            $(fileWidgetId+" div.progress div.bar").css("width", progress+"%");
        })
        .bind('fileuploaddone', function (e, data) {
            // file successfully uploaded
        })
        .bind('fileuploadfail', function (e, data) {
            // file upload failed
            var fileWidgetId = "#"+data.context.attr("id");
            var jqXHR = $(fileWidgetId).data("data").jqXHR;
            var errorText = jqXHR.responseText; // might be a string, might be XML, might be HTML. Let's assume HTML and extract the text content.
            if (typeof errorText === "string") {
                errorText = errorText.replace(/[\r\n]/g," ");
                errorText = errorText.replace(/<head[^>]*>.*<\/head[^>]*>/,""); // Remove <head/>
                errorText = errorText.replace(/<script[^>]*>.*<\/script[^>]*>/g,""); // Remove <script/>
                errorText = errorText.replace(/<style[^>]*>.*<\/style[^>]*>/g,""); // Remove <style/>
                errorText = errorText.replace(/<[^>]*>/g," ").replace(/\s+/g," ").replace(/^\s/,"").replace(/\s$/,"");
                if (errorText.length > 140)
                    errorText = errorText.substring(0,140) + " (â€¦)";
            }
            var statusTexts = {
                "100": "Continue",
                "101": "Switching Protocols",
                "102": "Processing",
                "200": "OK",
                "201": "Created",
                "202": "Accepted",
                "203": "Non-Authoritative Information",
                "204": "No Content",
                "205": "Reset Content",
                "206": "Partial Content",
                "207": "Multi-Status",
                "208": "Already Reported",
                "226": "IM Used",
                "300": "Multiple Choices",
                "301": "Moved Permanently",
                "302": "Found",
                "303": "See Other",
                "304": "Not Modified",
                "305": "Use Proxy",
                "306": "Reserved",
                "307": "Temporary Redirect",
                "308": "Permanent Redirect",
                "400": "Bad Request",
                "401": "Unauthorized",
                "402": "Payment Required",
                "403": "Forbidden",
                "404": "Not Found",
                "405": "Method Not Allowed",
                "406": "Not Acceptable",
                "407": "Proxy Authentication Required",
                "408": "Request Timeout",
                "409": "Conflict",
                "410": "Gone",
                "411": "Length Required",
                "412": "Precondition Failed",
                "413": "Request Entity Too Large",
                "414": "Request-URI Too Long",
                "415": "Unsupported Media Type",
                "416": "Requested Range Not Satisfiable",
                "417": "Expectation Failed",
                "422": "Unprocessable Entity",
                "423": "Locked",
                "424": "Failed Dependency",
                "425": "Reserved for WebDAV advanced collections expired proposal",
                "426": "Upgrade Required",
                "427": "Unassigned",
                "428": "Precondition Required",
                "429": "Too Many Requests",
                "430": "Unassigned",
                "431": "Request Header Fields Too Large",
                "500": "Internal Server Error",
                "501": "Not Implemented",
                "502": "Bad Gateway",
                "503": "Service Unavailable",
                "504": "Gateway Timeout",
                "505": "HTTP Version Not Supported",
                "506": "Variant Also Negotiates (Experimental)",
                "507": "Insufficient Storage",
                "508": "Loop Detected",
                "509": "Unassigned",
                "510": "Not Extended",
                "511": "Network Authentication Required"
            };
            var statusText = jqXHR.status+"" in statusTexts ? statusTexts[jqXHR.status+""] : jqXHR.status+"";
            $(fileWidgetId+" td div.error").text(statusText+": "+errorText).show();
            
            var fileCount = Number($("#filesNicename").data("fileCount"));
            fileCount = (!isNaN(fileCount) ? fileCount : 0) - 1;
            $("#filesNicename").data("fileCount", fileCount);
            $("#filesNicename").html(fileCount === 0 ? "No files" : fileCount === 1 ? "1 file" : fileCount+" files");
        })
        .bind('fileuploadalways', function (e, data) {
            // file upload finished (either succeeded or failed)
            var fileWidgetId = "#"+data.formData[0].value; // for some reason data.context does not refer to the row anymore here
            $(fileWidgetId+" div.progress").attr("aria-valuenow", 100);
            $(fileWidgetId+" div.progress").attr("aria-valuetext", "100%");
            $(fileWidgetId+" div.progress div.bar").css("width", "100%");
            $(fileWidgetId+" div.progress").hide();
            $(fileWidgetId+" td.cancel button").hide();
        })
        .bind('fileuploadstart', function (e) {
            // started uploading a file
            $("#filesProgress").html("(0%)");
        })
        .bind('fileuploadstop', function (e) {
            // finished uploading all files
            $("#filesProgress").html("");
        })
        .bind('fileuploadprogressall', function (e, data) {
            // global progress update
            var loaded = typeof e.loaded === "undefined" ? 0 : e.loaded;
            var total = typeof e.total === "undefined" ? 0 : e.total;
            var progress = Math.abs(total) < 1 ? 0 : Math.floor(loaded/total*100);
            $("#filesProgress").html("("+progress+"%)");
        });
    });
    function abortUpload (e) {
        e.preventDefault();
        var fileRow = $(e.currentTarget).closest('.fileRow');
        
        var data = fileRow.data('data') || {};
        if (!data.jqXHR) {
            data.errorThrown = 'abort';
            this._trigger('fail', e, data);
        } else {
            data.jqXHR.abort();
        }
    }
    function mediaTypeIcon(type) {
        if (typeof type !== "string") return "icon-file";
        if (type === "application/zip") return "icon-folder-open";
        if (type.indexOf("image/") == 0) return "icon-picture";
        if (type.indexOf("audio/") == 0) return "icon-headphones";
        if (type.indexOf("video/") == 0) return "icon-film";
        if (type === "text/html" || type === "text/plain"
            || type === "application/xhtml+xml"
            || type === "application/x-dtbook+xml"
            || type === "application/z3998-auth+xml") return "icon-book";
        return "icon-file";
    }
    // ]]>
</script>

    		</div>
    		<div id="doesNotAcceptFiles" style="display:none;">
    			<p><span id="doesNotAcceptFilesScriptName"></span> does not require any input files.</p>
    		</div>
		</div>
	</div>
	<div class="span4">
		<h2>Scripts</h2>
		<div id="scriptsInnerGroup">
		    <div class="INITIAL" style="text-align: center; display: none;">
				<img src="../_resources/loading.gif" alt="" style="margin:10px;"><br>
				<span>Loading...</span>
			</div>
			<div class="RUNNING" style="">
				<ul id="scriptList" class="unstyled oneOrMoreScripts scriptlist" style="">	<li><a data-description="Transforms a DAISY 2.02 publication into an EPUB3 publication." data-nicename="DAISY 2.02 to EPUB3" data-id="daisy202-to-epub3" class="script-button-daisy202-to-epub3" href="javascript:void(0)">DAISY 2.02 to EPUB3</a></li>
	<li><a data-description="Transforms a DAISY 3 publication into an EPUB 3 publication." data-nicename="DAISY 3 to EPUB 3" data-id="daisy3-to-epub3" class="script-button-daisy3-to-epub3" href="javascript:void(0)">DAISY 3 to EPUB 3</a></li>
	<li><a data-description="Converts multiple dtbooks to epub3 format" data-nicename="DTBook to EPUB3" data-id="dtbook-to-epub3" class="script-button-dtbook-to-epub3" href="javascript:void(0)">DTBook to EPUB3</a></li>
	<li><a data-description="Transforms DTBook XML into HTML." data-nicename="DTBook to HTML" data-id="dtbook-to-html" class="script-button-dtbook-to-html" href="javascript:void(0)">DTBook to HTML</a></li>
	<li><a data-description="Transforms a DTBook (DAISY 3 XML) document into a PEF." data-nicename="DTBook to PEF" data-id="dtbook-to-pef" class="script-button-dtbook-to-pef" href="javascript:void(0)">DTBook to PEF</a></li>
	<li><a data-description="Transforms DTBook XML into ZedAI XML." data-nicename="DTBook to ZedAI" data-id="dtbook-to-zedai" class="script-button-dtbook-to-zedai" href="javascript:void(0)">DTBook to ZedAI</a></li>
	<li><a data-description="Validates DTBook documents. Supports inclusion of MathML." data-nicename="DTBook Validator" data-id="dtbook-validator" class="script-button-dtbook-validator" href="javascript:void(0)">DTBook Validator</a></li>
	<li><a data-description="Transforms (X)HTML documents into an EPUB 3 publication." data-nicename="HTML to EPUB3" data-id="html-to-epub3" class="script-button-html-to-epub3" href="javascript:void(0)">HTML to EPUB3</a></li>
	<li><a data-description="Validate a NIMAS Fileset. Supports inclusion of MathML." data-nicename="NIMAS Fileset Validator" data-id="nimas-fileset-validator" class="script-button-nimas-fileset-validator" href="javascript:void(0)">NIMAS Fileset Validator</a></li>
	<li><a data-description="Transforms a ZedAI (DAISY 4 XML) document into an EPUB 3 publication." data-nicename="ZedAI to EPUB3" data-id="zedai-to-epub3" class="script-button-zedai-to-epub3" href="javascript:void(0)">ZedAI to EPUB3</a></li>
	<li><a data-description="Transforms ZedAI XML (ANSI/NISO Z39.98-2012 Authoring and Interchange) into HTML." data-nicename="ZedAI to HTML" data-id="zedai-to-html" class="script-button-zedai-to-html" href="javascript:void(0)">ZedAI to HTML</a></li>
	<li><a data-description="Transforms a ZedAI (DAISY 4 XML) document into a PEF." data-nicename="ZedAI to PEF" data-id="zedai-to-pef" class="script-button-zedai-to-pef" href="javascript:void(0)">ZedAI to PEF</a></li>
</ul>
				<table id="scriptTable" class="table" style="display:none;">
					<thead>
						<tr>
							<th>Script</th>
							<th>Description</th>
						</tr>
					</thead>
					<tbody>	<tr>
		<td><a data-description="Transforms a DAISY 2.02 publication into an EPUB3 publication." data-nicename="DAISY 2.02 to EPUB3" data-id="daisy202-to-epub3" class="script-button-daisy202-to-epub3" href="javascript:void(0)">DAISY 2.02 to EPUB3</a></td>
		<td>Transforms a DAISY 2.02 publication into an EPUB3 publication.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms a DAISY 3 publication into an EPUB 3 publication." data-nicename="DAISY 3 to EPUB 3" data-id="daisy3-to-epub3" class="script-button-daisy3-to-epub3" href="javascript:void(0)">DAISY 3 to EPUB 3</a></td>
		<td>Transforms a DAISY 3 publication into an EPUB 3 publication.</td>
	</tr>
	<tr>
		<td><a data-description="Converts multiple dtbooks to epub3 format" data-nicename="DTBook to EPUB3" data-id="dtbook-to-epub3" class="script-button-dtbook-to-epub3" href="javascript:void(0)">DTBook to EPUB3</a></td>
		<td>Converts multiple dtbooks to epub3 format</td>
	</tr>
	<tr>
		<td><a data-description="Transforms DTBook XML into HTML." data-nicename="DTBook to HTML" data-id="dtbook-to-html" class="script-button-dtbook-to-html" href="javascript:void(0)">DTBook to HTML</a></td>
		<td>Transforms DTBook XML into HTML.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms a DTBook (DAISY 3 XML) document into a PEF." data-nicename="DTBook to PEF" data-id="dtbook-to-pef" class="script-button-dtbook-to-pef" href="javascript:void(0)">DTBook to PEF</a></td>
		<td>Transforms a DTBook (DAISY 3 XML) document into a PEF.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms DTBook XML into ZedAI XML." data-nicename="DTBook to ZedAI" data-id="dtbook-to-zedai" class="script-button-dtbook-to-zedai" href="javascript:void(0)">DTBook to ZedAI</a></td>
		<td>Transforms DTBook XML into ZedAI XML.</td>
	</tr>
	<tr>
		<td><a data-description="Validates DTBook documents. Supports inclusion of MathML." data-nicename="DTBook Validator" data-id="dtbook-validator" class="script-button-dtbook-validator" href="javascript:void(0)">DTBook Validator</a></td>
		<td>Validates DTBook documents. Supports inclusion of MathML.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms (X)HTML documents into an EPUB 3 publication." data-nicename="HTML to EPUB3" data-id="html-to-epub3" class="script-button-html-to-epub3" href="javascript:void(0)">HTML to EPUB3</a></td>
		<td>Transforms (X)HTML documents into an EPUB 3 publication.</td>
	</tr>
	<tr>
		<td><a data-description="Validate a NIMAS Fileset. Supports inclusion of MathML." data-nicename="NIMAS Fileset Validator" data-id="nimas-fileset-validator" class="script-button-nimas-fileset-validator" href="javascript:void(0)">NIMAS Fileset Validator</a></td>
		<td>Validate a NIMAS Fileset. Supports inclusion of MathML.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms a ZedAI (DAISY 4 XML) document into an EPUB 3 publication." data-nicename="ZedAI to EPUB3" data-id="zedai-to-epub3" class="script-button-zedai-to-epub3" href="javascript:void(0)">ZedAI to EPUB3</a></td>
		<td>Transforms a ZedAI (DAISY 4 XML) document into an EPUB 3 publication.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms ZedAI XML (ANSI/NISO Z39.98-2012 Authoring and Interchange) into HTML." data-nicename="ZedAI to HTML" data-id="zedai-to-html" class="script-button-zedai-to-html" href="javascript:void(0)">ZedAI to HTML</a></td>
		<td>Transforms ZedAI XML (ANSI/NISO Z39.98-2012 Authoring and Interchange) into HTML.</td>
	</tr>
	<tr>
		<td><a data-description="Transforms a ZedAI (DAISY 4 XML) document into a PEF." data-nicename="ZedAI to PEF" data-id="zedai-to-pef" class="script-button-zedai-to-pef" href="javascript:void(0)">ZedAI to PEF</a></td>
		<td>Transforms a ZedAI (DAISY 4 XML) document into a PEF.</td>
	</tr>
</tbody>
					<!--<tfoot>
						<tr>
							<td colspan="2">More</td>
						</tr>
					</tfoot>-->
				</table>
				
				<div role="alert" class="noScripts alert alert-info" style="display: none;">
					<p>There are no scripts installed.</p>
				</div>
			</div>
			<div role="alert" class="STARTING alert alert-info" style="text-align: center; display: none;">
				<img src="../_resources/loading.gif" alt="" style="margin:10px;">
				<p>Starting the Pipeline engine...</p>
			</div>
			<div class="STOPPED" style="display: none;">
				<p style="text-align:center;">
					<img src="../_resources/loading.gif" alt="" style="margin:10px;"><br>
					<span>Attempting to connect to the framework...</span>
				</p>
				<br>
				<div role="alert" class="alert alert-warning">
					<p>Unable to communicate with the Pipeline engine.</p>
					<p>Please check the configuration of the Pipeline 2 engine in the administrative settings.</p>
				</div>
			</div>
		</div>
	</div>
</div>

<div id="accordion" style="display:none;" class="ui-accordion ui-widget ui-helper-reset" role="tablist">
	<h2 id="hFiles" class="fill-parent-padding ui-accordion-header ui-helper-reset ui-state-default ui-accordion-header-active ui-state-active ui-corner-top ui-accordion-icons" role="tab" aria-controls="collapseFiles" aria-selected="true" tabindex="0"><span class="ui-accordion-header-icon ui-icon ui-icon-circle-arrow-s"></span>Files<br><small class="muted" id="filesDetails"><span id="filesNicename">No files</span>&nbsp;<span id="filesProgress"></span><span id="filesetTypes"></span></small></h2>
	<div id="collapseFiles" class="fill-parent-padding ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content-active" style="" aria-labelledby="hFiles" role="tabpanel" aria-expanded="true" aria-hidden="false">
		<!-- files -->
		<div id="filesGroup" style="display:none;"></div>
	</div>
	<h2 id="hScripts" class="fill-parent-padding ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons" role="tab" aria-controls="collapseScripts" aria-selected="false" tabindex="-1"><span class="ui-accordion-header-icon ui-icon ui-icon-circle-arrow-e"></span>Scripts<br><small class="muted" id="scriptsDetails">&nbsp;</small></h2>
	<div id="collapseScripts" class="fill-parent-padding ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" aria-labelledby="hScripts" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;">
        <!-- scripts -->
		<div id="scriptsGroup" style="display:none;"></div>
	</div>
	<h2 id="hOptions" class="ui-accordion-header ui-helper-reset ui-state-default ui-corner-all ui-accordion-icons" role="tab" aria-controls="collapseOptions" aria-selected="false" tabindex="-1"><span class="ui-accordion-header-icon ui-icon ui-icon-circle-arrow-e"></span>Options<br><span class="muted" id="optionsDetails">&nbsp;</span></h2>
    <div id="collapseOptions" class="ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom" aria-labelledby="hOptions" role="tabpanel" aria-expanded="false" aria-hidden="true" style="display: none;">
        <!-- options -->
		<div id="optionsGroup" style="display:none;"></div>
	</div>
</div>

<br><br><br><br><br><br><!-- some room for scrolling -->

<script type="text/javascript">
	$(function(){
    	$("#accordion").accordion({
	    	heightStyle: "content",
	    	icons: {
		    	header: "ui-icon-circle-arrow-e",
		    	activeHeader: "ui-icon-circle-arrow-s"
		    }
	    });
		var updateState = function (state){
			$(".INITIAL").hide();
			if (state === "RUNNING") {
				$(".STOPPED").hide();
				$(".STARTING").hide();
				$(".RUNNING").show();
			} else if (state === "STARTING") {
				$(".STOPPED").hide();
				$(".STARTING").show();
				$(".RUNNING").hide();
			} else if (state === "STOPPED") {
				$(".STOPPED").show();
				$(".STARTING").hide();
				$(".RUNNING").hide();
			}
		}
		Notifications.listen("heartbeat", updateState);
		var scriptHrefBase = "/scripts/";
		var checkForScripts = function() {
			$.ajax({
				url: "/scripts.json",
				error: function(jqXHR, textStatus, errorThrown) {
					setTimeout(checkForScripts,5000);
				},
				success: function(scripts, textStatus, jqXHR) {
					$(".INITIAL").hide();
					$(".STOPPED").hide();
					$(".STARTING").hide();
					$(".RUNNING").show();
					if (scripts.length === 0) {
						$(".oneOrMoreScripts").hide();
						$(".noScripts").show();
					}
					else {
						$(".oneOrMoreScripts").show();
						$(".noScripts").hide();
						var table = $("#scriptTable tbody");
						var list = $("#scriptList");
						for (var s = 0; s < scripts.length; s++) {
							var scriptId = scripts[s].id.replace(/:/g,'\\x3A');
							var scriptIdEscaped = scripts[s].id.replace(/:/g,'\\\\x3A');
							$(list).append("	<li><a data-description=\""+scripts[s].desc+"\" data-nicename=\""+scripts[s].nicename+"\" data-id=\""+scriptId+"\" class=\"script-button-"+scriptId+"\" href=\"javascript:void(0)\">"+scripts[s].nicename+"</a></li>\n");
							$(table).append(
								"	<tr>\n"+
								"		<td><a data-description=\""+scripts[s].desc+"\" data-nicename=\""+scripts[s].nicename+"\" data-id=\""+scriptId+"\" class=\"script-button-"+scriptId+"\" href=\"javascript:void(0)\">"+scripts[s].nicename+"</a></td>\n"+
								"		<td>"+scripts[s].desc+"</td>\n"+
								"	</tr>\n");
							$(".script-button-"+scriptIdEscaped).click(function(){
								if (firstFileOrScriptChosen !== null) firstFileOrScriptChosen();
								if ($("#script-"+$(this).data("id")).size()===0) {
									$.ajax({
										url: "/scripts/"+$(this).data("id").replace(/\\x3A/g,'%3A'),
										success: function(data) {
											if ($("#script-"+$(this).data("id")).size()===0) {
												$('#optionsGroup').append(data);
												chooseScript(this);
											}
										},
										context: this
									});
								} else {
									chooseScript(this);
								}
								$("#optionsGroup > *:not(#script-"+$(this).data("id")+")").hide();
								$("#optionsGroup").show();
							});
						}
					}
				}
			});
		}
		checkForScripts();
		chooseScript = function(linkElement) {
			$("#script-"+$(this).data("id")).show();
			$("#scriptsDetails").html($(linkElement).data("nicename"));
			
			if ($("#script-"+$(linkElement).data("id")).data("fileinput")===true) {
				$("#doesNotAcceptFiles").hide();
				$("#acceptsFiles").show();
			} else {
				$("#acceptsFiles").hide();
				$("#doesNotAcceptFiles").show();
			}
			
			if ($("#script-"+$(linkElement).data("id")).data("fileinput")===false || !$.isEmptyObject(Job.uploads)) {
				// go to options accordion group if the script does not accept files or files have already been added
				$("#doesNotAcceptFilesScriptName").html($(linkElement).data("nicename"));
				$("#hOptions").click();
				
			} else {
				// go to files accordion group if the script accepts input files and no files have been added
				$("#hFiles").click();
			}
		}
		setTimeout(function(){
			// show spinning gif after one second of waiting
			if (!$(".STOPPED, .STARTING, .RUNNING, .ERROR").is(":visible")) {
				$(".INITIAL").show();
			}
		},1000);
		updateState("RUNNING");
		firstFileOrScriptChosen = function() {
			$("#scriptCreationPathGroup").hide();
			$("#scriptList").hide();
			$("#scriptsInnerGroup").appendTo("#scriptsGroup");
			$("#scriptList").removeClass("oneOrMoreScripts scriptlist");
			$("#scriptTable").addClass("oneOrMoreScripts scriptlist");
			$("#scriptTable").show();
			$("#filesInnerGroup").appendTo("#filesGroup");
			$("#filesGroup").show();
			$("#scriptsGroup").show();
			$("#accordion").show();
			$("#fileupload > div.row").children().removeClass("span6");
			$($("#fileupload > div.row")[0]).css("margin-left","auto").css("margin-right","auto").css("width","200px");
			$($("#fileupload > div.row")[1]).css("margin-left","auto").css("margin-right","auto").css("width","50%");
			$($("#fileupload > div.row")[2]).css("margin-left","auto").css("margin-right","auto").css("width","61.8033989%");
			firstFileOrScriptChosen = null;
		}
		Job.onFilesetTypeUpdate(function(filesetTypes){
			var types = "";
			for (var id in filesetTypes) {
				var fs = filesetTypes[id];
				if (types.length > 0) types = types + ", ";
				types = types + fs.name;
			}
			if (types.length > 0) types = "- " + types;
			$("#filesetTypes").html(types);
		});
		Job.onNewUpload(function(fileset, id){
			if (firstFileOrScriptChosen !== null) {
				firstFileOrScriptChosen();
				
				$("#hScripts").click();
			}
		});
		$('html,body').animate({scrollTop: 0},'fast');
	});
</script>


	
	</div>
	
	<!-- Scripts -->
	<script src="../_resources/jquery-ui-1.9.2.custom.min.js" type="text/javascript"></script>
	<script src="../_resources/bootstrap.min.js" type="text/javascript"></script>
	<script src="../_resources/json2.js" type="text/javascript"></script>
	<script src="../_resources/main.js" type="text/javascript"></script>
	<script src="../_resources/formUtils.js" type="text/javascript"></script>
	<script src="../_resources/notifications.js" type="text/javascript"></script>
	<script src="../_resources/fuzzyDates.js" type="text/javascript"></script>
	
		<script src="../_resources/jquery.ui.widget.js" type="text/javascript"></script>
	
		<script src="../_resources/jquery.iframe-transport.js" type="text/javascript"></script>
	
		<script src="../_resources/jquery.fileupload.js" type="text/javascript"></script>
	
		<script src="../_resources/jquery.fileupload-ui.js" type="text/javascript"></script>
	
		<script src="../_resources/createJob.js" type="text/javascript"></script>
	
	<script src="../theme/javascripts/theme.js" type="text/javascript"></script>
	<script type="text/javascript">
/*@cc_on
(function(f){window.setTimeout=f(window.setTimeout);window.setInterval=f(window.setInterval);})(function(f){return function(c,t){var a=[].slice.call(arguments,2);return f(function(){c.apply(this,a);},t);};});
@*/
	</script>
  


</body></html>
